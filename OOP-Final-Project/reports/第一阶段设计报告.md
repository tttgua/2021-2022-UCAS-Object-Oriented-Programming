# UCAS-大富翁

## 2019K8009937003

> 面向对象程序设计课程大作业——第一阶段报告

### 序言

大富翁是笔者小时候非常喜欢的一款棋牌游戏，找几个小伙伴一起经常能玩上一天一夜。一直以来，笔者都想设计一款属于自己的大富翁小游戏。而面向对象程序设计这门课提供了这一机会，故选择了这个项目来作为自己最终设计实现的选题。

### 游戏设定概述

在进行游戏整体介绍前，我们先来了解一下什么是大富翁类的游戏

###### 大富翁类游戏规则

> 摘自百度百科

大富翁是一种多人策略图版游戏，参与者分得游戏金钱，凭运气（掷骰子）及交易策略，买地、建楼以赚取租金，并以他人破产为目标来获得胜利。



在了解了大富翁游戏的基本规则后，简单概述一下整个游戏的设定

###### 基础设定

1. 采用一个矩形地图，地图分为均等的正方形小格，格子的类型有地产，商店，银行，事件，监狱，医院和<空>；
2. 玩家轮流进行自己的回合，通过掷骰子来确定移动格数(玩家抵达不同格子时所触发事件见需求分析部分)；
3. 玩家的财产总额等于现金 + 存款 + 麾下地产总额(购买加升级)；
4. 银行每10天结算一次利息，利率为10%；
5. 当玩家的财产总额不足以缴纳租金时，该玩家宣布破产并退出游戏；
6. 当场上只剩下一位玩家时，游戏结束，该玩家获得胜利。

###### 玩家初始信息

1. 初始现金￥10000，存款￥20000；
2. 具有 3 个道具卡栏位；
3. 1~4 号玩家依次出生在右下角，左下角，左上角，右上角；
4. 移动方向初始为顺时针。

###### 阶段一拟定游戏地图

![阶段1地图](E:\lwt\国科大大三上学期\面向对象的程序设计\Iteration1\阶段1地图.jpg)

——特殊地点：麦叔—商店、圈存机—银行、自习室—监狱、医院—医院

###### 地产价格概览

1. 食堂系列——￥500/块，租金￥200/次，每升一级多加￥200租金；
2. 教学楼系列——￥1000/块，租金￥400/次，每升一级多加￥400租金；
3. 人文楼系列——￥2000/块，租金￥1000/次，每升一级多加￥700租金；
4. 公寓系列——￥800/块，租金￥400/次，每升一级多加￥300租金；
5. 图书馆系列——￥1500/块，租金￥700/次，每升一级多加￥600租金；
6. 阶梯教室系列——￥1200/块，租金￥600/次，每升一级多加￥500租金；
7. 礼堂——￥4000，租金￥2500/次，不可升级；
8. 澡堂——￥2000，租金￥500/次，其他玩家抵达澡堂后立即住院3天，不可升级。

——最多升级3次

###### 随机事件(仅描述拟实现效果，文字描述待定)

1. 住院 3 天；
2. 入狱 3 天；
3. 获得现金￥500/1000/2000；
4. 失去现金￥500/1000/2000；
5. 随机升级一处地产；
6. 随机失去一处地产；
7. 获得一张道具卡；
8. 失去一张道具卡。

###### 卡片价格及效果

1. 转向卡(主动)—￥1000—改变自己的移动方向；
2. 控骰卡(主动)—￥1500—指定下一次骰子点数；
3. 免租卡(被动)—￥500—免除一次租金；
4. 陷害卡(主动)—￥1000—指定一名玩家入狱；
5. 免罪卡(被动)—￥200—免除一次牢狱之灾；
6. 强购卡(被动)—￥2000—强制购买一块他人的地产(在他人地皮上才能使用)

接下来是拟实现的功能表

| 功能编号 | 功能描述     | 备注                                                         |
| -------- | ------------ | ------------------------------------------------------------ |
| 000      | 主菜单显示   | 提供创建游戏，继续游戏（存档，视情况实现），退出游戏按钮     |
| 001      | 游戏初始化   | 需初始化游戏地图、玩家信息等等                               |
| 002      | 玩家移动     | 掷一个骰子并基于骰子点数向前移动，或触发事件效果后移动       |
| 003      | 购买地皮     | 玩家抵达无主之地时可选择是否购买该地皮                       |
| 004      | 升级地皮     | 玩家抵达自己的地皮时可选择是否升级该地皮                     |
| 005      | 购买道具卡   | 玩家抵达商店时可购买道具卡                                   |
| 006      | 使用道具卡   | 在触发卡片使用条件时玩家可选择是否使用该卡                   |
| 007      | 缴纳租金     | 玩家抵达他人地产时需缴纳一定租金                             |
| 008      | 存钱         | 玩家抵达银行时可选择存入银行的金额或不存                     |
| 009      | 取钱         | 玩家抵达银行时可选择从银行取出的金额或不取                   |
| 010      | 入狱         | 玩家触发监狱事件或受到相关卡片影响时，转移至监狱并暂停行动n回合，期间不可收取租金 |
| 011      | 住院         | 玩家触发医院事件或抵达澡堂时，转移至医院并暂停行动n回合，期间可以收取租金 |
| 012      | 变卖地产     | 玩家的现有资金(现金+存款)不足以缴纳租金时需变卖地产          |
| 013      | 触发随机事件 | 玩家抵达❓格时触发一个随机事件                                |
| 014      | 破产         | 玩家的财产总额不足以缴纳租金时宣布破产，退出游戏             |
| 015      | 显示玩家信息 | 在游戏界面显示出每个玩家的信息(包括现金，存款，地产等)       |
| 016      | 更新玩家信息 | 在玩家信息发生变动后即时更新，                               |
| 017      | 获得胜利     | 当且仅当场上剩下一名玩家未破产时，该玩家获得游戏胜利         |
| 018      | 暂停游戏     | 暂停整个游戏进程                                             |
| 019      | 播放背景音乐 | 创建游戏成功后自动播放                                       |
| 020      | 回合数显示   | 在游戏内表示为天数，所有玩家都进行了一回合后代表一天         |
| 021      | 银行结算利息 | 当游戏内天数为10的倍数时，自动结算利息                       |
| 022      | 改变移动方向 | 道具卡效果                                                   |
| 023      | 控制骰子点数 | 道具卡效果                                                   |
| 024      | 人机对战     | 视情况，最终不一定实现                                       |



### 需求分析（例：1为正常处理，1-1为异常处理，1-A为替代处理）

#### 1.

###### 【用例名称】

创建一个新游戏

###### 【场景】

​	Who：用户

​	Where：游戏主菜单

​	When：按下“创建游戏”按钮时

###### 【用例描述】

1. 用户按下游戏主菜单上的“创建游戏”按钮；

   1-1 用户按下“退出游戏”按钮

   1-A 游戏退出，用户回到启动游戏前的界面

2. 用户输入游玩人数以及玩家姓名（拟支持2-4人），系统根据用户输入的人数初始化游戏地图，玩家信息，人物图标等等，并显示在游戏界面上；

   2-1 用户按下“返回”按钮

   2-A 新游戏创建取消，用户回到游戏主菜单

3. 系统随机抽取一名玩家率先行动，新游戏创建完毕。

###### 【用例价值】

最基本的功能，只有创建了新游戏后用户才能进行游玩

###### 【约束和限制】

1. 游戏人数需在2~4人之间；
2. 玩家姓名需在3~10个字符之间。



#### 2.

###### 【用例名称】

掷骰子

###### 【场景】

​	Who：当前行动的玩家

​	Where：游戏界面

​	When：玩家回合开始时

###### 【用例描述】

1. 玩家在回合开始后点击骰子图标来掷骰子确定前进格数；

   1-1 玩家正在医院或监狱内

   1-2 玩家的卡片栏非空

   1-A 系统直接跳过该玩家的回合，并将其入狱或住院天数 -1，唤起下一个玩家回合

   1-B 触发卡片使用用例

2. 系统将掷骰子的结果显示在游戏界面上；

3. 系统在棋盘上顺着玩家移动的方向移动该玩家的人物图标，根据点数确定移动格数；

4. 移动完毕后，系统根据该玩家所在格类型，触发不同的用例。

   4-1 该格为一块空地皮

   4-2 该格为该玩家自己的地产

   4-3 该格为其他玩家的地产

   4-4 该格为商店

   4-5 该格为银行

   4-6 该格为问号(随机事件)

   4-7 该格为空格

   4-A 触发购买地产用例

   4-B 触发升级地产用例

   4-C 触发缴纳租金用例

   4-D 触发商店购物用例

   4-E 触发银行业务用例

   4-F 触发随机事件用例

   4-G 结束该玩家回合，唤起下一位玩家的回合

###### 【用例价值】

大富翁类游戏玩法的核心，游戏基于玩家掷骰子移动而进行

###### 【约束和限制】

1. 玩家一旦点击了骰子图标后，掷骰子事件立即进行，玩家不可再进行主动道具卡的使用；
2. 玩家不可跳过掷骰子环节，即玩家在每个自己的回合都必须至少进行一次掷骰子的行动。



#### 3.

###### 【用例名称】

购买地产

###### 【场景】

​	Who：当前行动的玩家

​	Where：游戏界面

​	When：玩家在自己的回合抵达空地皮时

###### 【用例描述】

1. 玩家移动至一块空地后，系统自动弹出提示询问玩家是否购买该地皮，并显示该地产的价格；

   1-1 玩家的现金不足以购买该地皮

   1-A 系统弹出提示”您的现金不足，无法购买此地“，并跳到步骤3

2. 若玩家选择是，系统从玩家的现金中减去该金额，并将此地产添加至玩家信息中的地产中，即时更新该玩家信息，随后弹出提示”购买成功！“；

3. 系统结束该玩家的回合，唤起下一位玩家的回合。

###### 【用例价值】

游戏玩法核心之一，玩家通过让别人走到自己的地产上收取租金来获得胜利

###### 【约束和限制】

无



#### 4.

###### 【用例名称】

升级地产

###### 【场景】

​	Who：当前行动的玩家

​	Where：游戏界面

​	When：玩家在自己的回合抵达自己的地皮时

###### 【用例描述】

1. 玩家移动至一块自己的地皮后，系统自动弹出提示询问玩家是否升级该地皮，并显示升级该地皮的价格；

   1-1 玩家的现金不足以升级该地皮

   1-2 该地皮的等级已达最高等级

   1-A 系统弹出提示”您的现金不足，无法升级此地“，并跳到步骤3

   1-B 系统弹出提示“该地已达最高等级！“，并跳到步骤3

2. 若玩家选择是，系统从玩家的现金中减去该金额，并将玩家信息中该地产的等级加一，即时更新该玩家信息，随后弹出提示”升级成功！“

3. 系统结束该玩家的回合，唤起下一位玩家的回合。

###### 【用例价值】

玩家通过升级自己的地产来增加获取的租金额，从而达到加速他人破产的目的

###### 【约束和限制】

无



#### 5.

###### 【用例名称】

缴纳租金

###### 【场景】

​	Who：当前行动的玩家

​	Where：游戏界面

​	When：玩家在自己的回合抵达他人的地皮时

###### 【用例描述】

1. 玩家移动至一块他人的地皮后，系统查询该地产拥有人x的地产信息，计算出应缴纳的租金额n，而后自动弹出提示”这是玩家x的土地，您需要缴纳租金￥n“；

2. 系统从玩家的现金中减去该金额，即时更新该玩家信息；

   2-1 玩家的现金不足以缴纳该租金

   2-2 玩家的现金加上存款都不足以缴纳该租金

   2-3 玩家的资产总额都不足以缴纳该租金

   2-4 玩家拥有相关的被动道具卡

   2-A 系统扣除该玩家的所有现金，现金不足部分由存款抵扣

   2-B 系统扣除该玩家的所有现金以及存款，并要求玩家变卖地产直至有足够的资金缴纳

   2-C 系统直接宣布该玩家破产，而后该玩家退出游戏

   2-D 系统询问玩家是否使用道具卡，若玩家选择是，则弹出提示”道具卡使用成功！“

3. 系统结束该玩家的回合，唤起下一位玩家的回合。

###### 【用例价值】

游戏核心玩法之一，玩家通过缴纳租金来达成破产。

###### 【约束和限制】

1. 在变卖地产时，玩家可以选择降低自己地产的等级，或者出售自己的地皮，但一定要凑齐足够的资金缴纳租金。



#### 6.

###### 【用例名称】

商店购物

###### 【场景】

​	Who：当前行动的玩家

​	Where：游戏界面

​	When：玩家在自己的回合抵达商店时

###### 【用例描述】

1. 玩家移动至商店后，系统随机生成一张卡片，并弹出窗口显示它以及它的价格，询问玩家是否购买；

   1-1 玩家的现金不足以购买当前卡片

   1-2 玩家的卡片栏已满

   1-A 系统弹出提示”您的现金不足，无法购买此卡“，并跳到步骤3

   1-B 系统弹出提示”您的道具栏已满，无法购买此卡“，并跳到步骤3

2. 若玩家选择是，系统从玩家的现金中减去该金额，在玩家的卡片栏中增加该卡，即时更新该玩家信息，并弹出提示“购买成功！欢迎下次光临”；

3. 系统结束该玩家的回合，唤起下一位玩家的回合

###### 【用例价值】

游戏的特色玩法之一，玩家通过合理地使用不同的道具卡来达成对自己有利的局面。

###### 【约束和限制】

无



#### 7.

###### 【用例名称】

银行业务

###### 【场景】

​	Who：当前行动的玩家

​	Where：游戏界面

​	When：玩家在自己的回合抵达银行时

###### 【用例描述】

1. 玩家移动至银行后，系统查询该玩家的账户余额n，并弹出提示“您的账户余额为n，是否取款？”；

   1-1 玩家的存款为0

   1-A 直接一熬到步骤4

2. 若玩家选择是，系统接着弹出提示“请输入您的取款金额”，并等待用户输入，否则跳到步骤4；

3. 系统读取玩家的输入后，从玩家的存款中减去该金额，与之相应地在玩家的现金中加上该金额，即时更新该玩家信息，并弹出提示“取款成功！”；

   3-1 玩家的输入不在 0~存款额范围之内

   3-A 系统提示玩家重新输入

4. 系统再次查询该玩家的账户余额m，继续弹出提示“您的帐户余额为m，是否存款？”；

5. 若玩家选择是，系统接着弹出提示“请输入您的存款金额”，并等待用户输入，否则跳到步骤7；

6. 系统读取玩家的输入后，从玩家的现金中减去该金额，与之相应地在玩家的存款中加上该金额，即时更新该玩家信息，并弹出提示“存款成功！”；

   6-1 玩家的输入不在 0~现金额范围之内

   6-A 系统提示玩家重新输入

7. 系统结束该玩家的回合，唤起下一位玩家的回合。

###### 【用例价值】

游戏的特色玩法之一，玩家通过合理地在银行存钱来获取利息，从而达到对自己有利的局面。

###### 【约束和限制】

1. 玩家的输入金额时应当合法，不要尝试奇怪的输入



#### 8.

###### 【用例名称】

随机事件

###### 【场景】

​	Who：当前行动的玩家

​	Where：游戏界面

​	When：玩家在自己的回合抵达问号格时

###### 【用例描述】

1. 玩家移动至问号格后，系统随机生成一个事件，并弹出该事件的提示，待玩家确认；

2. 玩家确认后，系统根据该事件对玩家信息进行改动，或将玩家的人物图标移至相应的位置；

   2-1 触发失去现金事件时，玩家的现金不足以支付

   2-A 系统直接将玩家的现金清零，不会扣除存款或要求玩家变卖地产

3. 系统结束该玩家的回合，唤起下一位玩家的回合

###### 【用例价值】

游戏的特色玩法之一，增加游戏的随机性和乐趣。

###### 【约束和限制】

1. 每个事件发生的概率均等



#### 9.

###### 【用例名称】

卡片使用

###### 【场景】

​	Who：当前行动的玩家

​	Where：游戏界面

​	When：玩家回合开始后，掷骰子前

###### 【用例描述】

1. 玩家回合开始后，可选择卡片栏中的任一具有主动效果的道具卡进行使用；
2. 系统根据玩家选择使用的道具卡效果，触发相应的功能。

###### 【用例价值】

游戏的特色玩法之一，玩家通过合理地使用不同的道具卡来达成对自己有利的局面。

###### 【约束和限制】

1. 玩家不能使用不具有主动效果的道具卡

















